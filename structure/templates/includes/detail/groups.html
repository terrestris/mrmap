{% extends 'sceletons/card.html' %}
{% load static i18n %}
{% load fontawesome_5 %}

{% block card-header-title-left %}
<h4 class="mb-1 mr-3" style="display: inline;">{% autoescape off %}{{THEME.ICONS.GROUP}}{% endautoescape %} <strong>{% trans group.name %}</strong></h4>
<h6 style="display: inline;"><a href="{% url 'structure:detail-group' group.id %}">{{THEME.ICONS.EXTERNAL_LINK}}</a></h6>
{% endblock %}
{% block card-header-title-right %}

{% endblock %}
{% block card-body %}
{% with group.id|stringformat:"i" as group_id %}

<div class="row mb-2 ">
    <div class="col">
        <div class="row">
            {% if user in group.user_set.all %}
            <div class="col-sm mb-2 text-center">
                <a role="button" class="btn {{THEME.CARD.BTN_WARNING_COLOR}}" href="{% url 'structure:leave-group' group.id %}?current-view={{current_view}}&current-view-arg={{group.id}}">
                    {% autoescape off %}{{THEME.ICONS.SIGNOUT}}{% endautoescape %} {% trans 'Leave group' %}
                </a>
            </div>
            {% endif %}

            {% if 'can_edit_group' in user_permissions and group.created_by == user %}
            <div class="col-sm mb-2 text-center">
                <a role="button" class="btn {{THEME.CARD.BTN_WARNING_COLOR}}" href="{% url 'structure:edit-group' group.id %}?current-view={{current_view}}&current-view-arg={{group.id}}">
                    {% autoescape off %}{{THEME.ICONS.EDIT}}{% endautoescape %} {% trans 'Edit group' %}
                </a>
            </div>

            {% endif %}
            {% if 'can_delete_group' in user_permissions and group.created_by == user %}
            <div class="col-sm mb-2 text-center">
                <a role="button" class="btn {{THEME.CARD.BTN_DANGER_COLOR}}" href="{% url 'structure:delete-group' group.id %}?current-view={{current_view}}&current-view-arg={{group.id}}">
                    {% autoescape off %}{{THEME.ICONS.REMOVE}}{% endautoescape %} {% trans 'Delete group' %}
                </a>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<div class="row mb-2 ">
    <div class="col">
        {% include 'includes/detail/groups_table.html' %}
    </div>
</div>

{% if user in members %}
<div class="row mb-2 ">
    <div class="col">
        {% with group.id as id_accordion %}
            {% include 'includes/detail/groups_publishes_for_accordion.html' %}
        {% endwith %}
    </div>
</div>
{% endif %}

{% if subgroups|length > 0 %}
<div class="row mb-2 ">
    <div class="col">
        {% with group.id as id_accordion %}
            {% with "accordion_sub_element" as id_accordion_combined %}
                {% include 'includes/detail/show_subgroup_accordion.html' %}
            {% endwith %}
        {% endwith %}
    </div><!--</col-->
</div><!--</row-->
{% endif %}
{% endwith %}
{% endblock %}